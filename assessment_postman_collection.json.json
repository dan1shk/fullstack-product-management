{
  "info": {
    "name": "Fullstack Assessment API v2.0",
    "description": "API collection for authentication, categories, and products",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"test@example.com\", \"password\": \"password123\"}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login User (Auto-save Token)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set('auth_token', jsonData.data.token);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\"email\": \"test@example.com\", \"password\": \"password123\"}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/auth/profile",
              "host": ["{{base_url}}"],
              "path": ["auth", "profile"]
            }
          }
        }
      ]
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Create Category (With Parent + Status)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\": \"Smartphones\", \"parent_category_id\": 1, \"status\": \"active\"}"
            },
            "url": {
              "raw": "{{base_url}}/categories",
              "host": ["{{base_url}}"],
              "path": ["categories"]
            }
          }
        },
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/categories/all",
              "host": ["{{base_url}}"],
              "path": ["categories", "all"]
            }
          }
        },
        {
          "name": "Update Category (All Fields)",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\": \"Updated Electronics\", \"parent_category_id\": null, \"status\": \"active\"}"
            },
            "url": {
              "raw": "{{base_url}}/categories/1",
              "host": ["{{base_url}}"],
              "path": ["categories", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "Create Product - All Fields",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Samsung Galaxy S24 Ultra\",\n  \"brand\": \"Samsung\",\n  \"manufacturer\": \"Samsung Electronics\",\n  \"description\": \"Flagship smartphone with AI features\",\n  \"barcode\": \"8806095168937\",\n  \"price\": 1199.99,\n  \"cost_price\": 800.00,\n  \"selling_price\": 1199.99,\n  \"mrp\": 1299.99,\n  \"category_id\": 1,\n  \"image\": \"https://example.com/galaxy.jpg\",\n  \"uom\": \"piece\",\n  \"primitive_quantity\": 1,\n  \"units_per_packaging\": 1,\n  \"expiry_date\": null,\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/products",
              "host": ["{{base_url}}"],
              "path": ["products"]
            }
          }
        },
        {
          "name": "Create Product - Auto-Generated Barcode",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Apple MacBook Pro\",\n  \"brand\": \"Apple\",\n  \"manufacturer\": \"Apple Inc\",\n  \"price\": 2499.99,\n  \"cost_price\": 1800,\n  \"selling_price\": 2499.99,\n  \"category_id\": 1,\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/products",
              "host": ["{{base_url}}"],
              "path": ["products"]
            }
          }
        },
        {
          "name": "Create Product - With Expiry Date",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Organic Milk 1L\",\n  \"brand\": \"Fresh Farms\",\n  \"manufacturer\": \"Local Dairy\",\n  \"price\": 4.99,\n  \"cost_price\": 3.00,\n  \"selling_price\": 4.99,\n  \"mrp\": 5.49,\n  \"category_id\": 2,\n  \"uom\": \"l\",\n  \"expiry_date\": \"2025-12-31\",\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/products",
              "host": ["{{base_url}}"],
              "path": ["products"]
            }
          }
        },
        {
          "name": "Sort by Price (Ascending)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/products?sortBy=price&sortOrder=asc",
              "host": ["{{base_url}}"],
              "path": ["products"],
              "query": [
                { "key": "sortBy", "value": "price" },
                { "key": "sortOrder", "value": "asc" }
              ]
            }
          }
        },
        {
          "name": "Search Products",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/products?search=samsung",
              "host": ["{{base_url}}"],
              "path": ["products"],
              "query": [{ "key": "search", "value": "samsung" }]
            }
          }
        },
        {
          "name": "Filter by Category",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/products?category_id=1",
              "host": ["{{base_url}}"],
              "path": ["products"],
              "query": [{ "key": "category_id", "value": "1" }]
            }
          }
        },
        {
          "name": "Combined Filters",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/products?page=1&limit=20&sortBy=price&sortOrder=asc&search=phone&category_id=1",
              "host": ["{{base_url}}"],
              "path": ["products"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" },
                { "key": "sortBy", "value": "price" },
                { "key": "sortOrder", "value": "asc" },
                { "key": "search", "value": "phone" },
                { "key": "category_id", "value": "1" }
              ]
            }
          }
        },
        {
          "name": "Update Product - All Fields",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{auth_token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Samsung Galaxy S24 Ultra (Updated)\",\n  \"brand\": \"Samsung\",\n  \"manufacturer\": \"Samsung Electronics\",\n  \"description\": \"Updated flagship phone\",\n  \"barcode\": \"8806095168937\",\n  \"price\": 1099.99,\n  \"cost_price\": 750.00,\n  \"selling_price\": 1099.99,\n  \"mrp\": 1199.99,\n  \"category_id\": 1,\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/products/1",
              "host": ["{{base_url}}"],
              "path": ["products", "1"]
            }
          }
        },
        {
          "name": "Bulk Upload CSV",
          "request": {
            "method": "POST",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "body": {
              "mode": "formdata",
              "formdata": [{ "key": "file", "type": "file", "src": "sample-products.csv" }]
            },
            "url": {
              "raw": "{{base_url}}/products/bulk-upload",
              "host": ["{{base_url}}"],
              "path": ["products", "bulk-upload"]
            }
          }
        },
        {
          "name": "Download Report (CSV)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/products/report?format=csv",
              "host": ["{{base_url}}"],
              "path": ["products", "report"],
              "query": [{ "key": "format", "value": "csv" }]
            }
          }
        },
        {
          "name": "Download Report (XLSX)",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{auth_token}}" }],
            "url": {
              "raw": "{{base_url}}/products/report?format=xlsx",
              "host": ["{{base_url}}"],
              "path": ["products", "report"],
              "query": [{ "key": "format", "value": "xlsx" }]
            }
          }
        }
      ]
    },
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "url": {
          "raw": "http://localhost:5000/health",
          "protocol": "http",
          "host": ["localhost"],
          "port": "5000",
          "path": ["health"]
        }
      }
    }
  ],
  "variable": [
    { "key": "base_url", "value": "http://localhost:5000/api" },
    { "key": "auth_token", "value": "" }
  ]
}
